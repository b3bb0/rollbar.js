(function(i,l){var s={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};function o(w){var v=s;var e=v.parser[v.strictMode?"strict":"loose"].exec(w);var u={};var t=14;while(t--){u[v.key[t]]=e[t]||""}u[v.q.name]={};u[v.key[12]].replace(v.q.parser,function(y,x,z){if(x){u[v.q.name][x]=z}});return u}function p(t){if(t){var e=o(t);if(e.anchor===""){e.source=e.source.replace("#","")}var u=e.source.replace("?"+e.query,"");t=u}return t}var j=function(e){var v=[];if(e.arguments&&e.stack){v=this.parseChromeExc(e)}else{if(e.stack){if(e.stack.indexOf("@")===-1){v=this.parseChromeExc(e)}else{v=this.parseFirefoxOrSafariExc(e)}}else{var u=parseInt(typeof e.line!=="undefined"?e.line:e.lineNumber,10)||0;var t=p((typeof e.sourceURL!=="undefined"?e.sourceURL:e.fileName)||null);v=[{filename:t,lineno:u}]}}this.frames=v.reverse()};j.prototype.parseChromeExc=function(B){var z,D,u,v,E,x=[],G=B.stack.split("\n"),y,F,A=G.length,C=[];for(y=1;y<A;++y){F=G[y];z=F.replace(/^\s+|\s+$/g,"").slice(3);if(z==="unknown source"){continue}else{z=z.split(" ")}if(z.length>2){D=z[0];u=z.slice(1).join(" ");v=0}else{if(z.length===2){D=z[0];u=z[1]}else{D=null;u=z[0]}}if(u&&u!=="(unknown source)"){if(u[0]==="("){u=u.slice(1,-1)}var w=/:([0-9]+(:([0-9]+))?)$/;var t=w.exec(u);if(t){v=t[1];v=v.split(":");if(v.length>1){E=parseInt(v[1],10)}else{E=null}v=parseInt(v[0],10);u=p(u.slice(0,u.indexOf(t[0])))}else{v=0;E=null}}C.push({filename:u,lineno:v,colno:E,method:D})}return C};j.prototype.parseFirefoxOrSafariExc=function(A){var y,C,t,v,w=[],E=A.stack.split("\n"),x,D,z=E.length,B=[];for(x=0;x<z;++x){D=E[x];if(D){y=D.split("@");if(y[0]){C=y[0].split("(");C=(typeof C[0]!=="undefined"&&String(C[0]).length)?C[0]:null}else{C=null}if(y.length>1){t=y[1].split(":");v=parseInt(t.slice(-1)[0],10)||0;t=p(t.slice(0,-1).join(":"))||"<native code>"}else{if(y[0]==="[native code]"){C=null;t="<native code>";v=0}}var u={filename:t,lineno:v,method:C};if(x==0&&A.columnNumber){u.colno=A.columnNumber+1}B.push(u)}}return B};function a(){function v(B){return B<10?"0"+B:B}Date.prototype.toRollbarJSON=function(B){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+v(this.getUTCMonth()+1)+"-"+v(this.getUTCDate())+"T"+v(this.getUTCHours())+":"+v(this.getUTCMinutes())+":"+v(this.getUTCSeconds())+"Z":null};String.prototype.toRollbarJSON=Number.prototype.toRollbarJSON=Boolean.prototype.toRollbarJSON=function(B){return this.valueOf()};var u=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,x=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y,t,A={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},z;function e(B){x.lastIndex=0;return x.test(B)?'"'+B.replace(x,function(C){var D=A[C];return typeof D==="string"?D:"\\u"+("0000"+C.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+B+'"'}function w(I,F){var D,C,J,B,G=y,E,H=F[I];if(H&&typeof H==="object"&&typeof H.toRollbarJSON==="function"){H=H.toRollbarJSON(I)}if(typeof z==="function"){H=z.call(F,I,H)}switch(typeof H){case"string":return e(H);case"number":return isFinite(H)?String(H):"null";case"boolean":case"null":return String(H);case"object":if(!H){return"null"}y+=t;E=[];if(Object.prototype.toString.apply(H)==="[object Array]"){B=H.length;for(D=0;D<B;D+=1){E[D]=w(D,H)||"null"}J=E.length===0?"[]":y?"[\n"+y+E.join(",\n"+y)+"\n"+G+"]":"["+E.join(",")+"]";y=G;return J}if(z&&typeof z==="object"){B=z.length;for(D=0;D<B;D+=1){if(typeof z[D]==="string"){C=z[D];J=w(C,H);if(J){E.push(e(C)+(y?": ":":")+J)}}}}else{for(C in H){if(Object.prototype.hasOwnProperty.call(H,C)){J=w(C,H);if(J){E.push(e(C)+(y?": ":":")+J)}}}}J=E.length===0?"{}":y?"{\n"+y+E.join(",\n"+y)+"\n"+G+"}":"{"+E.join(",")+"}";y=G;return J}}return function(E,C,D){var B;y="";t="";if(typeof D==="number"){for(B=0;B<D;B+=1){t+=" "}}else{if(typeof D==="string"){t=D}}z=C;if(C&&typeof C!=="function"&&(typeof C!=="object"||typeof C.length!=="number")){throw new Error("JSON.stringify")}return w("",{"":E})}}var m=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");var f={accessToken:null,extraParams:null,handler:null,items:[],browserPlugins:[],logger:null,defaultLevel:"warning",itemsPerMinute:5,pastMinuteItems:0,checkIgnore:null,initialize:function(w,t,u,y){this.accessToken=w;this.environment=u||t["server.environment"];this.defaultLevel=t.level||this.defaultLevel;this.itemsPerMinute=(t.itemsPerMinute||t.itemsPerMinute==0?t.itemsPerMinute:this.itemsPerMinute);this.extraParams=t;this.startTime=(new Date()).getTime();this.logger=y||(i.console?function(B){i.console.log(B)}:function(){});this.checkIgnore=t.checkIgnore||this.checkIgnore;if(t.endpoint){this.endpoint=t.endpoint}else{var z;if(i.location.protocol.indexOf("http")===0){z=i.location.protocol}else{z="https:"}this.endpoint=z+"//api.rollbar.com/api/1/"}var A=(i.navigator.plugins||[]);var x;var v;var e=A.length;for(v=0;v<e;++v){x=A[v];this.browserPlugins.push({name:x.name,description:x.description})}},XMLHttpFactories:[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var v=false;var w=f.XMLHttpFactories;var u;var t=w.length;for(u=0;u<t;u++){try{v=w[u]();break}catch(x){}}return v},push:function(e,t){if(e instanceof Error){this.handleError(e,t)}else{if(typeof e=="object"&&!e.hasOwnProperty("msg")&&e.hasOwnProperty(0)&&e.hasOwnProperty(1)&&e.hasOwnProperty(2)){this.handleUncaughtError(e[0],e[1],e[2])}else{if(typeof e=="object"&&e.hasOwnProperty("_t")&&e._t==="uncaught"){this.handleUncaughtError(e.e,e.u,e.l)}else{if(typeof e=="object"&&e.hasOwnProperty("_t")&&e._t==="trace"){this.handleErrorTrace(e,t)}else{if(typeof e=="object"){this.handleMessage(e,t)}else{this.handleMessage({level:"info",msg:e.toString()},t)}}}}}},handleMessage:function(v,x){if(!v.msg){var u="Object argument must contain the property 'msg'";this.logger(u);if(x){x(new Error(u))}return}var e;var w=v.level||"info";var t={level:w,body:{message:{body:v.msg}}};if(v._fingerprint){t.fingerprint=v._fingerprint}for(e in v){if(v.hasOwnProperty(e)&&e!=="level"&&e!=="msg"&&e!=="_fingerprint"){t.body.message[e]=v[e]}}if(x){t.callback=x}this.items.push(t);this.handleEvents()},handleUncaughtError:function(w,u,A){w=w||"uncaught exception";u=u||"(unknown)";A=A||0;if(this.checkIgnore!==null){try{if(this.checkIgnore(w,u,A)===true){return}}catch(x){this.logger("Exception during check ignore: "+x)}}var v=p(u);var z=[{filename:v,lineno:parseInt(A,10)||null}];var t=w.match(m);var y="(unknown)";if(t){y=t[t.length-1];w=w.replace((t[t.length-2]||"")+y+":","");w=w.replace(/(^[\s]+|[\s]+$)/g,"")}this._pushTrace({exception:{"class":y,message:w},frames:z},null)},handleError:function(v,y){var t=v.name||typeof v;var u=v.message||v.toString();var w={exception:{"class":t,message:u}};if(v.stack){var e=new j(v);var x=e.frames;if(x){w.frames=x}}if(!w.frames){this.handleMessage({msg:t+": "+u,level:"error"},y)}else{this._pushTrace(w,y)}},handleErrorTrace:function(t,u){if(!t.trace){var e="Trace objects must contain the property 'trace'";this.logger(e);if(u){u(new Error(e))}return}this._pushTrace(t.trace,u)},_pushTrace:function(t,u){var e={body:{trace:t}};if(u){e.callback=u}this.items.push(e);this.handleEvents()},handleEvents:function(){if(this.handler){clearTimeout(this.handler)}this.handler=setTimeout(this.asyncHandler,200)},asyncHandler:function(){var v;var w;var u=f.buildPayload;var t=f.postItem;try{v=f.items.shift();while(v){w=u(v);f.postItem(w,v.callback);v=f.items.shift()}}catch(e){f.printInternalError(e)}},postItem:function(A,t){if(this.pastMinuteItems<this.itemsPerMinute){var u=this;if(this.pastMinuteItems===0){setTimeout(function(){u.pastMinuteItems=0},60000)}this.pastMinuteItems++}else{if(this.itemsPerMinute>0){return}}var w=f.createXMLHTTPObject();if(w){try{try{var B=function(C){try{if(t&&B&&w.readyState===4){B=undefined;if(w.status===200){t(null)}else{if(typeof(w.status)==="number"&&w.status>=400&&w.status<600){t(new Error(w.status.toString()))}else{t(new Error())}}}}catch(D){t(new Error())}};w.open("POST",f.endpoint+"item/",true);if(w.setRequestHeader){w.setRequestHeader("Content-Type","application/json")}w.onreadystatechange=B;w.send(A)}catch(z){if(typeof XDomainRequest!=="undefined"){var e=function(C){if(t){t(new Error())}};var y=function(C){if(t){t(new Error())}};var v=function(C){if(t){t()}};w=new XDomainRequest();w.onprogress=function(){};w.ontimeout=e;w.onerror=y;w.onload=v;w.open("POST",f.endpoint+"item/",true);w.send(A)}}}catch(x){}}},buildPayload:function(u){var y={access_token:f.accessToken,data:{environment:f.environment,level:f.defaultLevel,platform:"browser",framework:"browser-js",language:"javascript",request:{url:i.location.href,query_string:i.location.search,user_ip:"$remote_ip"},client:{runtime_ms:(new Date()).getTime()-f.startTime,timestamp:Math.round((new Date()).getTime()/1000),javascript:{browser:i.navigator.userAgent,language:i.navigator.language,cookie_enabled:i.navigator.cookieEnabled,screen:{width:i.screen.width,height:i.screen.height},plugins:f.browserPlugins}},server:{},notifier:{name:"rollbar-browser-js",version:"0.9.6"}}};var e;var t;var v;var x;var w;for(e in u){if(u.hasOwnProperty(e)){y.data[e]=u[e]}}var z=f.extraParams;for(e in z){if(z.hasOwnProperty(e)){v=z[e];x=e.split(".");w=y.data;for(t=0;t<x.length-1;t++){w=w[x[t]]}w[x[x.length-1]]=v}}return f.stringify(y)},printInternalError:function(e){if(f.logger){f.logger("Internal rollbar error: "+e)}}};var h={a:[{b:1}]};try{var d=JSON.stringify(h);if(d!=='{"a":[{"b":1}]}'){f.stringify=a()}else{f.stringify=JSON.stringify}}catch(r){f.stringify=a()}var c=i._rollbar||i._ratchet;if(typeof c!=="undefined"&&c.shift){var b=c.shift();var q=c.shift();var k=f;var n=c;var g=n.shift();k.initialize(b,q);i._rollbar=k;i._ratchet=k;while(g){k.push(g);g=n.shift()}}})(window,document);